<!-- Success Message -->
<div class="alert alert-success mb-4" id="success-alert">
    <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span>{{ success_message }}</span>
</div>

<form 
    method="post" 
    class="space-y-6"
    hx-post="{% url 'manufacturing:htmx_create_stop_event' production_run.pk %}"
    hx-target="#stop-event-container"
    hx-swap="innerHTML">
    {% csrf_token %}
    
    <!-- Fresh form for next entry -->
    {% include 'manufacturing/htmx/stop_event_form.html' %}
    
    <!-- Form Actions -->
    <div class="flex flex-col sm:flex-row gap-3 pt-6 border-t">
        <button type="submit" class="btn btn-error btn-lg flex-1">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5C2.962 17.333 3.924 19 5.464 19z"></path>
            </svg>
            Add Another Stop Event
        </button>
        <a href="{% url 'manufacturing:production_run_detail' production_run.pk %}" class="btn btn-success btn-lg flex-1">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            Finish & Go Back
        </a>
        <button type="button" class="btn btn-outline btn-lg" onclick="window.location.reload()">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            Refresh
        </button>
    </div>
</form>

<script>
    // Make success banner disappear after 3 seconds
    setTimeout(function() {
        const successAlert = document.getElementById('success-alert');
        if (successAlert) {
            successAlert.style.transition = 'opacity 0.5s ease-out';
            successAlert.style.opacity = '0';
            setTimeout(function() {
                successAlert.remove();
            }, 500);
        }
    }, 3000);
</script>
